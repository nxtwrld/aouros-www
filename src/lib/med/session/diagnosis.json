{
    "name": "extractor",
    "description": "You a medical professional assistent. You have transcript of doctor patient conversation and you provide deailed assessment of the conversation. We want to extract symptoms and diagnosis and potentially suggest alternatives. Assume the conversation take place today. Provide all answers in [LANGUAGE] language.",
    "parameters": {
        "type": "object",
        "properties": {

            "conversation": {
                "type": "array",
                "description": "The transcript of the conversation between the doctor and the patient. Use the original text and try to split it into a meaningfull conversation where patients and doctors have their separate lines.",
                "items": {
                    "type": "object",
                    "properties": {
                        "speaker": {
                            "type": "string",
                            "enum": ["doctor", "patient", "nurse"],
                            "description": "The speaker of the conversation"
                        },
                        "text": {
                            "type": "string",
                            "description": "The text of the conversation. Make sure to split the conversation into separate lines for the doctor and the patient. If there are any obvious mistakes in the text created by the speech to text model, correct them according to context."
                        },
                        "stress": {
                            "type": "string",
                            "enum": ["low", "medium", "high"],
                            "description": "The stress level of the speaker"
                        },
                        "urgency": {
                            "type": "string",
                            "enum": ["low", "medium", "high"],
                            "description": "The urgency of the speaker"
                        }
                    }
                }   

            },
            "symptoms": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the symptom. Provide answer in [LANGUAGE] language."
                        },
                        "duration": {
                            "type": "string",
                            "enum": ["hours", "days", "weeks", "months", "years"],
                            "description": "The duration of the symptom"
                        },
                        "severity": {
                            "type": "string",
                            "enum": ["mild", "moderate", "severe"],
                            "description": "The severity of the symptom"
                        },
                        "bodyParts": {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "description": "The body part where the symptom is located. Selecte a matching item from the enum list.",
                                "enum": []
                            }

                        }
                    }
                },
                "description": "A list of symptoms the patient is experiencing. Provide answer in [LANGUAGE] language."
            },
            "complaint": {
                "type": "string",
                "description": "The main complaint of the patient. Provide answer in [LANGUAGE] language."
            },
            "diagnosis": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the diagnosis. Provide answer in [LANGUAGE] language."
                        },
                        "origin": {
                            "type": "string",
                            "description": "The origin of the diagnosis. Select Specialist if the doctor mentioned its in conversation, select Test if it is implied by the provided test results, selecte Symptoms if if is implied from the patient symptoms description. Provide answer in [LANGUAGE] language.",
                            "enum": ["symptoms", "tests", "specialist"]
                        },
                        "basis": {
                            "type": "string",
                            "description": "The basis of the diagnosis. Provide answer in [LANGUAGE] language."
                        },
                        "probability": {
                            "type": "number",
                            "description": "The probability of the diagnosis"
                        }
                    }
                },
                "description": "A list of possible diagnoses. Provide answers in [LANGUAGE] language."
            },
            "treatment": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties" :{
                        "description": {
                            "type": "string",
                            "description": "The description of the  treatment or counter measures. Provide answer in [LANGUAGE] language."
                        },
                        "origin": {
                            "type": "string",
                            "description": "The origin of the treatment or counter messages. Select Specialist if the doctor mentioned or suggested it in conversation, select Test if it is implied by the provided test results, selecte Symptoms if if is implied from the patient symptoms description. Provide answer in [LANGUAGE] language.",
                            "enum": ["symptoms", "tests", "specialist"]
                        }
                    }

                },
                "description": "A list of counter meassures to prevent the disease. Provide answer in [LANGUAGE] language.. Provide answer in [LANGUAGE] language."
            },
            "followUp": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": ["test", "specialist"],
                            "description": "The type of follow up or specialist visit recommendation"
                        },
                        "name": {
                            "type": "string",
                            "description": "The name of the follow up or specialist visit recommendation. Provide answer in [LANGUAGE] language."
                        },
                        "reason": {
                            "type": "string",
                            "description": "The reason for the follow up or specialist visit recommendation. Provide answer in [LANGUAGE] language."
                        },
                        "origin": {
                            "type": "string",
                            "description": "The origin of the counterMeassures. Select Specialist if the doctor mentioned it in conversation, select Test if it is implied by the provided test results, selecte Symptoms if if is implied from the patient symptoms description. Provide answer in [LANGUAGE] language.",
                            "enum": ["symptoms", "tests", "specialist"]
                        }
                    }
                },
                "description": "Based on the diagnosis we want to recommend further follow up tests to be done or specialists visit recommendation. List possible tests and specialists to visit. Provide answers in [LANGUAGE] language."
            },
            "medication": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "type": "string",
                            "description": "The name of the medication. Provide answer in [LANGUAGE] language."
                        },
                        "dosage": {
                            "type": "number",
                            "description": "The dosage of the medication in mg units."
                        },
                        "days": {
                            "type": "string",
                            "enum": ["1-3 days", "3-5 days", "5-7 days", "7-10 days", "10-14 days"],
                            "description": "The days the medication should be taken"
                        },
                        "days_of_week": {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "enum": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]
                            },
                            "description": "The days of the week the medication should be taken"
                        },
                        "time_of_day": {
                            "type": "string",
                            "description": "The time of day the medication should be taken. Provide answer in [LANGUAGE] language."
                        },
                        "origin": {
                            "type": "string",
                            "description": "The origin of the counterMeassures. Select Specialist if the doctor mentioned it in conversation, select Test if it is implied by the provided test results, selecte Symptoms if if is implied from the patient symptoms description. Provide answer in [LANGUAGE] language.",
                            "enum": ["symptoms", "tests", "specialist"]
                        }
                    }
                }
            }
        },
        "required": [ "conversation", "complaint", "symptoms", "diagnosis", "counterMeasures", "chat_response"]
    }
}